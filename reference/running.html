
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Running Ambassador · Ambassador: open source API Gateway for microservices and Kubernetes</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
        <link rel="stylesheet" href="../styles/website.css">
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/ambassador-v0.40.0-docs/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/ambassador-v0.40.0-docs/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="diagnostics.html" />
    
    
    <link rel="prev" href="advanced.html" />
    

    </head>
    <body>
        
    <noscript>
        <iframe src="//www.googletagmanager.com/ns.html?id=GTM-TPMQ838" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <script>
        (function(w,d,s,l,i){
            w[l]=w[l]||[];
            w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
            var f=d.getElementsByTagName(s)[0],
                j=d.createElement(s),
                dl=l!='dataLayer'?'&l='+l:'';
            j.async=true;
            j.src='//www.googletagmanager.com/gtm.js?id='+i+dl;
            f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-TPMQ838');
    </script>
    
<div class="book">
    <div class="book-summary">
        
<a href="/" class="logo__link">
    <img class="logo" src="/ambassador-v0.40.0-docs/images/ambassador-logo.svg" alt="logo">
</a>


            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://blog.getambassador.io">
            
                    
                    Blog
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Getting Started</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../about/why-ambassador.html">
            
                <a href="../about/why-ambassador.html">
            
                    
                    Why Ambassador?
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../about/features-and-benefits.html">
            
                <a href="../about/features-and-benefits.html">
            
                    
                    Features and Benefits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../user-guide/install.html">
            
                <a href="../user-guide/install.html">
            
                    
                    Installing Ambassador
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.3.1" data-path="../user-guide/getting-started.html">
            
                <a href="../user-guide/getting-started.html">
            
                    
                    Kubernetes (YAML)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.2" data-path="../user-guide/helm.html">
            
                <a href="../user-guide/helm.html">
            
                    
                    Kubernetes (Helm)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.3" data-path="../about/quickstart.html">
            
                <a href="../about/quickstart.html">
            
                    
                    Docker Quickstart
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3.4" data-path="../user-guide/docker-compose.html">
            
                <a href="../user-guide/docker-compose.html">
            
                    
                    Docker Compose
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    
        
        <li class="header">Concepts</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../concepts/developers.html">
            
                <a href="../concepts/developers.html">
            
                    
                    Decentralized configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../concepts/architecture.html">
            
                <a href="../concepts/architecture.html">
            
                    
                    Ambassador Architecture
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" >
            
                <a target="_blank" href="https://blog.getambassador.io/envoy-vs-nginx-vs-haproxy-why-the-open-source-ambassador-api-gateway-chose-envoy-23826aed79ef">
            
                    
                    Why Ambassador uses Envoy Proxy
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../about/microservices-api-gateways.html">
            
                <a href="../about/microservices-api-gateways.html">
            
                    
                    Microservices API Gateways
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../concepts/using-ambassador-in-org.html">
            
                <a href="../concepts/using-ambassador-in-org.html">
            
                    
                    Using Ambassador in your organization
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Guides</li>
        
        
    
        <li class="chapter " data-level="4.1" data-path="../user-guide/auth-tutorial.html">
            
                <a href="../user-guide/auth-tutorial.html">
            
                    
                    Adding Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="../user-guide/rate-limiting-tutorial.html">
            
                <a href="../user-guide/rate-limiting-tutorial.html">
            
                    
                    Adding Rate Limiting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="../user-guide/tracing-tutorial.html">
            
                <a href="../user-guide/tracing-tutorial.html">
            
                    
                    Adding Tracing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="../user-guide/grpc.html">
            
                <a href="../user-guide/grpc.html">
            
                    
                    Use gRPC with Ambassador
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="../user-guide/tls-termination.html">
            
                <a href="../user-guide/tls-termination.html">
            
                    
                    TLS Termination
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="../user-guide/with-istio.html">
            
                <a href="../user-guide/with-istio.html">
            
                    
                    Istio and Ambassador
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.7" >
            
                <a target="_blank" href="https://blog.getambassador.io/howto/home">
            
                    
                    More guides
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Reference</li>
        
        
    
        <li class="chapter " data-level="5.1" data-path="configuration.html">
            
                <a href="configuration.html">
            
                    
                    Configuring Ambassador
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="modules.html">
            
                <a href="modules.html">
            
                    
                    Core Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1.1" data-path="core/tls.html">
            
                <a href="core/tls.html">
            
                    
                    TLS and X-Forwarded-Proto
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="mappings.html">
            
                <a href="mappings.html">
            
                    
                    Configuring Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.2.1" data-path="canary.html">
            
                <a href="canary.html">
            
                    
                    Canary Releases
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.2" data-path="cors.html">
            
                <a href="cors.html">
            
                    
                    Cross Origin Resource Sharing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.3" data-path="override.html">
            
                <a href="override.html">
            
                    
                    Custom Envoy config
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.4" data-path="headers.html">
            
                <a href="headers.html">
            
                    
                    Header-based routing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.5" data-path="host.html">
            
                <a href="host.html">
            
                    
                    Host Header
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.6" data-path="rate-limits.html">
            
                <a href="rate-limits.html">
            
                    
                    Rate Limits
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.7" data-path="redirects.html">
            
                <a href="redirects.html">
            
                    
                    Redirects
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.8" data-path="add_request_headers.html">
            
                <a href="add_request_headers.html">
            
                    
                    Request Headers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.9" data-path="rewrites.html">
            
                <a href="rewrites.html">
            
                    
                    Rewrites
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.2.10" data-path="shadowing.html">
            
                <a href="shadowing.html">
            
                    
                    Traffic Shadowing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="services/services.html">
            
                <a href="services/services.html">
            
                    
                    External Services
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.3.1" data-path="services/auth-service.html">
            
                <a href="services/auth-service.html">
            
                    
                    Authentication
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3.2" data-path="services/rate-limit-service.html">
            
                <a href="services/rate-limit-service.html">
            
                    
                    Rate Limiting
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.1.3.3" data-path="services/tracing-service.html">
            
                <a href="services/tracing-service.html">
            
                    
                    Tracing
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="advanced.html">
            
                <a href="advanced.html">
            
                    
                    Advanced configuration topics
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter active" data-level="5.2" data-path="running.html">
            
                <a href="running.html">
            
                    
                    Running Ambassador
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="diagnostics.html">
            
                <a href="diagnostics.html">
            
                    
                    Diagnostics
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.2.2" data-path="ambassador-with-aws.html">
            
                <a href="ambassador-with-aws.html">
            
                    
                    Ambassador with AWS
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="upgrading.html">
            
                <a href="upgrading.html">
            
                    
                    Upgrading Ambassador
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="statistics.html">
            
                <a href="statistics.html">
            
                    
                    Statistics and Monitoring
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Developers</li>
        
        
    
        <li class="chapter " data-level="6.1" >
            
                <a target="_blank" href="https://github.com/datawire/ambassador/blob/master/BUILDING.md">
            
                    
                    Building Ambassador (GitHub)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="6.2" >
            
                <a target="_blank" href="https://github.com/datawire/ambassador/blob/master/CHANGELOG.md">
            
                    
                    Changelog (GitHub)
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Need Help?</li>
        
        
    
        <li class="chapter " data-level="7.1" >
            
                <a target="_blank" href="https://d6e.co/slack">
            
                    
                    Ask on Slack
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.2" >
            
                <a target="_blank" href="https://github.com/datawire/ambassador/issues/new">
            
                    
                    File a GitHub Issue
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="7.3" >
            
                <a target="_blank" href="https://www.datawire.io">
            
                    
                    Visit Datawire.io
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        

    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Running Ambassador</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
<a id="datawire-breadcrumb" href="https://datawire.io/learn/open-source-docs">
    ← Back to Datawire Open Source Documentation
</a>

                                <h1 id="running-ambassador">Running Ambassador</h1>
<p>This section is intended for operators running Ambassador, and covers various aspects of deploying and configuring Ambassador in production.</p>
<h2 id="ambassador-and-kubernetes">Ambassador and Kubernetes</h2>
<p>Ambassador relies on Kubernetes for reliability, availability, and scalability. This means that features such as Kubernetes readiness and liveness probes, rolling updates, and the Horizontal Pod Autoscaling should be utilized to manage Ambassador.</p>
<h2 id="default-configuration">Default configuration</h2>
<p>The default configuration of Ambassador includes default <a href="https://kubernetes.io/docs/concepts/configuration/manage-compute-resources-container/#resource-requests-and-limits-of-pod-and-container" target="_blank">resource limits</a>, as well as <a href="https://kubernetes.io/docs/tasks/configure-pod-container/configure-liveness-readiness-probes/" target="_blank">readiness and liveness probes</a>. These values should be adjusted for your specific environment.</p>
<h2 id="running-as-non-root">Running as non-root</h2>
<p>Starting with Ambassador 0.35, we support running Ambassador as non-root. This is the recommended configuration, and will be the default configuration in future releases. We recommend you configure Ambassador to run as non-root as follows:</p>
<ul>
<li>Have Kubernetes run Ambassador as non-root. This may happen by default (e.g., OpenShift) or you can set a <code>securityContext</code> in your Deployment as shown below in this abbreviated example:</li>
</ul>
<pre><code class="lang-yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> extensions/v1beta1
<span class="hljs-attr">kind:</span> Deployment
<span class="hljs-attr">metadata:</span>
<span class="hljs-attr">  name:</span> ambassador
<span class="hljs-attr">spec:</span>
<span class="hljs-attr">  replicas:</span> <span class="hljs-number">1</span>
<span class="hljs-attr">  template:</span>
<span class="hljs-attr">    metadata:</span>
<span class="hljs-attr">      labels:</span>
<span class="hljs-attr">        service:</span> ambassador
<span class="hljs-attr">    spec:</span>
<span class="hljs-attr">      containers:</span>
<span class="hljs-attr">        image:</span> quay.io/datawire/ambassador:<span class="hljs-number">0.35</span><span class="hljs-number">.0</span>
<span class="hljs-attr">        name:</span> ambassador
<span class="hljs-attr">     restartPolicy:</span> Always
<span class="hljs-attr">     securityContext:</span>
<span class="hljs-attr">       runAsUser:</span> <span class="hljs-number">8888</span>
<span class="hljs-attr">     serviceAccountName:</span> ambassador
</code></pre>
<ul>
<li><p>Set the <code>service_port</code> element in the ambassador Module to 8080 (cleartext) or 8443 (TLS). This is the port that Ambassador will use to listen to incoming traffic. Note that any port number above 1024 will work; Ambassador will use 8080/8443 as its defaults in the future.</p>
</li>
<li><p>Make sure that incoming traffic to Ambassador is configured to route to the <code>service_port</code>. If you&apos;re using the default Ambassador configuration, this means configuring the <code>targetPort</code> to point to the <code>service_port</code> above.</p>
</li>
<li><p>If you are using <code>redirect_cleartext_from</code>, change the value of this field to point to your cleartext port (e.g., 8080) and set <code>service_port</code> to be your TLS port (e.g., 8443).</p>
</li>
</ul>
<h2 id="namespaces">Namespaces</h2>
<p>Ambassador supports multiple namespaces within Kubernetes. To make this work correctly, you need to set the <code>AMBASSADOR_NAMESPACE</code> environment variable in Ambassador&apos;s container. By far the easiest way to do this is using Kubernetes&apos; downward API (this is included in the YAML files from <code>getambassador.io</code>):</p>
<pre><code class="lang-yaml"><span class="hljs-attr">env:</span>
<span class="hljs-attr">- name:</span> AMBASSADOR_NAMESPACE
<span class="hljs-attr">  valueFrom:</span>
<span class="hljs-attr">    fieldRef:</span>
<span class="hljs-attr">      fieldPath:</span> metadata.namespace
</code></pre>
<p>Given that <code>AMBASSADOR_NAMESPACE</code> is set, Ambassador <a href="mappings">mappings</a> can operate within the same namespace, or across namespaces. <strong>Note well</strong> that mappings will have to explicitly include the namespace with the service to cross namespaces; see the <a href="mappings">mapping</a> documentation for more information.</p>
<p>If you only want Ambassador to only work within a single namespace, set <code>AMBASSADOR_SINGLE_NAMESPACE</code> as an environment variable.</p>
<h2 id="multiple-ambassadors-in-one-cluster">Multiple Ambassadors in One Cluster</h2>
<p>Ambassador supports running multiple Ambassadors in the same cluster, without restricting a given Ambassador to a single namespace. This is done with the <code>AMBASSADOR_ID</code> setting. In the Ambassador module, set the <code>ambassador_id</code>, e.g.,</p>
<pre><code class="lang-yaml"><span class="hljs-attr">apiVersion:</span> v1
<span class="hljs-attr">kind:</span> Service
<span class="hljs-attr">metadata:</span>
<span class="hljs-attr">  name:</span> ambassador
<span class="hljs-attr">  namespace:</span> ambassador<span class="hljs-bullet">-1</span>
<span class="hljs-attr">  labels:</span>
<span class="hljs-attr">    app:</span> ambassador
<span class="hljs-attr">  annotations:</span>
    getambassador.io/config: <span class="hljs-string">|
      ---
</span><span class="hljs-attr">      apiVersion:</span> ambassador/v0
<span class="hljs-attr">      kind:</span>  Module
<span class="hljs-attr">      name:</span>  ambassador
<span class="hljs-attr">      ambassador_id:</span> ambassador<span class="hljs-bullet">-1</span>
</code></pre>
<p>Then, assign each Ambassador pod a unique <code>AMBASSADOR_ID</code> with the environment variable as part of your deployment:</p>
<pre><code class="lang-yaml"><span class="hljs-attr">env:</span>
<span class="hljs-attr">- name:</span> AMBASSADOR_ID
<span class="hljs-attr">  value:</span> ambassador<span class="hljs-bullet">-1</span>
</code></pre>
<p>Ambassador will then only use YAML objects that include an appropriate <code>ambassador_id</code> attribute. For example, if Ambassador is given the ID <code>ambassador-1</code> as above, then of these YAML objects, only the first two will be used:</p>
<pre><code class="lang-yaml"><span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> ambassador/v0
<span class="hljs-attr">kind:</span>  Mapping
<span class="hljs-attr">name:</span>  mapping_used_1
<span class="hljs-attr">ambassador_id:</span> ambassador<span class="hljs-bullet">-1</span>
<span class="hljs-attr">prefix:</span> /demo1/
<span class="hljs-attr">service:</span> demo1
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> ambassador/v0
<span class="hljs-attr">kind:</span>  Mapping
<span class="hljs-attr">name:</span>  mapping_used_2
<span class="hljs-attr">ambassador_id:</span> [ <span class="hljs-string">&quot;ambassador-1&quot;</span>, <span class="hljs-string">&quot;ambassador-2&quot;</span> ]
<span class="hljs-attr">prefix:</span> /demo2/
<span class="hljs-attr">service:</span> demo2
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> ambassador/v0
<span class="hljs-attr">kind:</span>  Mapping
<span class="hljs-attr">name:</span>  mapping_skipped_1
<span class="hljs-attr">prefix:</span> /demo3/
<span class="hljs-attr">service:</span> demo3
<span class="hljs-meta">---</span>
<span class="hljs-attr">apiVersion:</span> ambassador/v0
<span class="hljs-attr">kind:</span>  Mapping
<span class="hljs-attr">name:</span>  mapping_skipped_2
<span class="hljs-attr">ambassador_id:</span> ambassador<span class="hljs-bullet">-2</span>
<span class="hljs-attr">prefix:</span> /demo4/
<span class="hljs-attr">service:</span> demo4
</code></pre>
<p>The list syntax (shown in <code>mapping_used_2</code> above) permits including a given object in the configuration for multiple Ambassadors. In this case <code>mapping_used_2</code> will be included in the configuration for <code>ambassador-1</code> and also for <code>ambassador-2</code>.</p>
<p><strong>Note well that <em>any</em> object can have an <code>ambassador_id</code> included</strong> so, for example, it is <em>fully supported</em> to use <code>ambassador_id</code> to qualify the <code>ambassador Module</code>, <code>TLS</code>, and <code>AuthService</code> objects.</p>
<p>If no <code>AMBASSADOR_ID</code> is assigned to an Ambassador, it will use the ID <code>default</code>. If no <code>ambassador_id</code> is present in a YAML object, it will also use the ID <code>default</code>.</p>
<h2 id="ambassadorverifysslfalse"><code>AMBASSADOR_VERIFY_SSL_FALSE</code></h2>
<p>By default, Ambassador will verify the TLS certificates provided by the Kubernetes API. In some situations, the cluster may be deployed with self-signed certificates. In this case, set <code>AMBASSADOR_VERIFY_SSL_FALSE</code> to <code>true</code> to disable verifying the TLS certificates.</p>
<h2 id="reconfiguration-timing-configuration">Reconfiguration Timing Configuration</h2>
<p>Ambassador is constantly watching for changes to the service annotations. When changes are observed, Ambassador generates a new Envoy configuration and restarts the Envoy handling the heavy lifting of routing. Three environment variables provide control over the timing of this reconfiguration:</p>
<ul>
<li><p><code>AMBASSADOR_RESTART_TIME</code> (default 15) sets the minimum number of seconds between restarts. No matter how often services are changed, Ambassador will never restart Envoy more frequently than this.</p>
</li>
<li><p><code>AMBASSADOR_DRAIN_TIME</code> (default 5) sets the number of seconds that the Envoy will wait for open connections to drain on a restart. Connections still open at the end of this time will be summarily dropped.</p>
</li>
<li><p><code>AMBASSADOR_SHUTDOWN_TIME</code> (default 10) sets the number of seconds that Ambassador will wait for the old Envoy to clean up and exit on a restart. <strong>If Envoy is not able to shut down in this time, the Ambassador pod will exit.</strong> If this happens, it is generally indicative of issues with restarts being attempted too often.</p>
</li>
</ul>
<p>These environment variables can be set much like <code>AMBASSADOR_NAMESPACE</code>, above.</p>

                                

                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="advanced.html" class="navigation navigation-prev " aria-label="Previous page: Advanced configuration topics">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="diagnostics.html" class="navigation navigation-next " aria-label="Next page: Diagnostics">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Running Ambassador","level":"5.2","depth":1,"next":{"title":"Diagnostics","level":"5.2.1","depth":2,"path":"reference/diagnostics.md","ref":"reference/diagnostics.md","articles":[]},"previous":{"title":"Advanced configuration topics","level":"5.1.4","depth":2,"path":"reference/advanced.md","ref":"reference/advanced.md","articles":[]},"dir":"ltr"},"config":{"plugins":["gtm","anchorjs"],"root":".","styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"gtm":{"token":"GTM-TPMQ838","virtualPageViews":true},"search":{},"layout":{"footerPath":"layouts/footer.html"},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"fontsettings":{"theme":"white","family":"sans","size":2},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"anchorjs":{"selector":"h2,h3,h4,h5","placement":"right","visible":"always","truncate":64,"ariaLabel":"Anchor"}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"INDEX.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"Ambassador: open source API Gateway for microservices and Kubernetes","gitbook":"*"},"file":{"path":"reference/running.md","mtime":"2020-08-25T18:44:25.444Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-09-14T18:10:30.972Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>


        
    
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-gtm/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-anchorjs/anchor-style.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    <script src="/js/datawire-breadcrumb.js" type="text/javascript"></script>

    </body>
</html>

